1) Исправлены синтаксические ошибки, связанные с типизацией (случай null).
2) try-catch блок для fetch.
3) Константы, типы, интерфейсы, хуки и компоненты вынесены в отдельные файлы.
4) Основная идея:
  - При нажатии на кнопку генерируем новый Id и используем throttledId, чтобы избежать каскадного вызова fetch.
  - Если id есть в record, обращаться к серверу нет необходимости
  - Если id новый, получаем нового пользователя и сохраняем.